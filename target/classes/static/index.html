<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cars website</title>
    <link rel="stylesheet" href="css\style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"
     integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" 
     crossorigin="anonymous">
    </script>
    <script src="jquery_cookie.js"></script>
    <script src="main.js"></script>
  </head>
  <body>
<!------------------------HEADER-------------------------->
  <!-- HEADER -->
  <header class="header">
    <div id="menu-btn">
      <i class="fa-solid fa-bars"></i>
    </div>

    <a href="#" class="logo"><span>max</span>wheels </a>
    <nav class="navbar" style="text-decoration:none;">
      <a href="index.html">Home</a>
      <a href="#services">Services</a>
      <a href="history.html">History</a>
      <a href="profile.html">Profile</a>
      <a href="#contact">Contact</a>
      <!-- These links will be shown/hidden based on user role -->
      <!-- <a href="mechanic.html" class="mechanic-only" style="display: none;">Dashboard</a>
      <a href="history.html" class="user-only" style="display: none;">History</a> -->
    </nav>
    <div id="login-btn">
      <button class="btn" onclick="logout()">Logout</button>
      <i class="far fa-user"></i>
  </div>
    <!-- <div id="login-btn">
      <a href="login.html">
        <button class="btn">Login</button>
        <i class="far fa-user"></i>
      </a>
    </div>
    <div id="register-btn">
      <a href="register.html">
        <button class="btn">Register</button>
        <i class="fa-solid fa-user-plus"></i>
      </a>
    </div>
    <div>
      <a href="cart.html"><button style="font-size:1.5rem; cursor:pointer; background:none;"><i class="fa-solid fa-cart-shopping"></i> Cart</button></a>
    </div> -->
  </header>
    <!------------------------END OF HEADER------------------->

    <!-------LOGIN FORM------------------------------->

    <div class="login-form-container">
      <span class="fas fa-times" id="close-login-form"> </span>

      <form action="">
        <h3>user login</h3>
        <input class="box" type="email" placeholder="Email" />
        <input class="box" type="password" placeholder="Password" />
        <input type="submit" value="login now" class="btn" />
      </form>
    </div>

    <!-------------------REGISTERATION FORM----------------------->

    <div class="register-form-container">
      <span class="fas fa-times" id="close-register-form"> </span>

      <form action="">
        <h3>user registeration</h3>
        <input class="box" type="text" placeholder="Name" />
        <input class="box" type="email" placeholder="Email" />
        <input class="box" type="password" placeholder="Password" />
        <input type="submit" value="Register" class="btn" />
      </form>
    </div>

    <!----------------------HOME SECTON START--------------------->

    <section class="home" id="home">
      <h1 class="home-parallax" data-speed="-2">Find your car</h1>
      <img
        class="home-parallax"
        data-speed="5"
        src="./assets/9693_Three-audi-car-in-different-colors.jpg"
        alt=""
      />
      <a href="#featured" class="btn home-parallax" data-speed="7"
        >Explore cars</a
      >
    </section>

    <!------------------------------ICONS SECTION------------------->
    <section class="icons-container">
      <div class="icons">
        <i class="fas fa-home"></i>
        <div class="content">
          <h3>150+</h3>
          <p>branches</p>
        </div>
      </div>

      <div class="icons">
        <i class="fas fa-car"></i>
        <div class="content">
          <h3>4770+</h3>
          <p>cars sold</p>
        </div>
      </div>

      <div class="icons">
        <i class="fas fa-users"></i>
        <div class="content">
          <h3>590+</h3>
          <p>happy clients</p>
        </div>
      </div>

      <div class="icons">
        <i class="fas fa-car"></i>
        <div class="content">
          <h3>890+</h3>
          <p>new cars</p>
        </div>
      </div>
    </section>
<!-- Coming Soon Section -->
<section class="soon">
  <h1 class="heading"><span>popular </span>vehicles</h1>
  <div class="soon-wrapper">
    <!-- Product 1 -->
    <div class="soon-cards">
      <form action="" method="post">
        <img src="images/car1.jpg" alt="Toyota Camry"> 
        <h3>Porsche 911 GT3 RS</h3>
        <p class="price">$100000</p>
        <input type="hidden" name="product_name" value="Toyota Camry">
        <input type="hidden" name="product_price" value="100">
        <input type="hidden" name="product_image" value="images/car1.jpg">
        <input type="hidden" id="fav" value="add to fav" name="add_to_fav">
        <button type="submit" class="btn">Add to favorites</button>
      </form>
    </div>

    <!-- Product 2 -->
    <div class="soon-cards">
      <form action="" method="post">
        <img src="images/car2.jpg" alt="Honda Accord"> 
        <h3>Honda Accord</h3>
        <p class="price">$9000</p>
        <input type="hidden" name="product_name" value="Honda Accord">
        <input type="hidden" name="product_price" value="90">
        <input type="hidden" name="product_image" value="images/car2.jpg">
        <input type="hidden" id="fav" value="add to fav" name="add_to_fav">
        <button type="submit" class="btn">Add to favorites</button>
      </form>
    </div>

    <!-- Product 3 -->
    <div class="soon-cards">
      <form action="" method="post">
        <img src="images/car3.jpg" alt="Ford Mustang"> 
        <h3>Ford Mustang</h3>
        <p class="price">$15000</p>
        <input type="hidden" name="product_name" value="Ford Mustang">
        <input type="hidden" name="product_price" value="150">
        <input type="hidden" name="product_image" value="images/car3.jpg">
        <input type="hidden" id="fav" value="add to fav" name="add_to_fav">
        <button type="submit" class="btn">Add to favorites</button>
      </form>
    </div>

  </div>
</section>

<style>
.soon {
  margin-top: 3rem;
}
.soon-wrapper{
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}
.soon-cards {
  text-align: center;
  padding: 2rem;
  box-shadow: 0 0.3rem 0.5rem rgba(0, 0, 0, 0.2);
  border: 1px solid #ccc;
  border-radius: 0.5rem;
  width: 30%;
  margin: 1%;
  transition: transform 0.2s ease-in-out;
}

.soon img {
  height: 15rem;
  width: 100%;
  /* object-fit: contain; */
  margin-bottom: 1rem;
}

.soon-cards:hover {
  transform: scale(1.05);
}

.soon h3 {
  font-size: 2.2rem;
  color: #333;
  margin-bottom: 0.5rem;
}

.soon .price {
  font-size: 2.5rem;
  color: #333;
  margin-top: 1rem;
}

</style>
</section>


    <!-- services section starts here -->
    <section class="services" id="services">
      <h1 class="heading">our <span>services</span></h1>
      <a href="./book.html" class="btn home-parallax" data-speed="7">Book A Service</a>
      <div class="box-container">
        <div class="box">
          <i class="fas fa-car"></i>
          <h3>car selling</h3>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing Lorem ipsum dolor
            sit amet.
          </p>
        </div>
        <div class="box">
          <i class="fas fa-tools"></i>
          <h3>parts repair</h3>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing Lorem ipsum dolor
            sit amet.
          </p>
        </div>
        <div class="box">
          <i class="fas fa-car-crash"></i>
          <h3>car insurance</h3>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing Lorem ipsum dolor
            sit amet.
          </p>
        </div>
        <div class="box">
          <i class="fas fa-car-battery"></i>
          <h3>battery replacement</h3>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing Lorem ipsum dolor
            sit amet.
          </p>
        </div>
        <div class="box">
          <i class="fas fa-gas-pump"></i>
          <h3>oil change</h3>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing Lorem ipsum dolor
            sit amet.
          </p>
        </div>
        <div class="box">
          <i class="fas fa-car"></i>
          <h3>car rental</h3>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing Lorem ipsum dolor
            sit amet.
          </p>
        </div>
      </div>
    </section>


    <!-- contact section starts here -->
    <section class="contact" id="contact">
      <h1 class="heading"><span>contact </span>us</h1>
      <div class="row">
        <iframe
          class="map"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d387191.33750346623!2d-73.97968099999999!3d40.6974881!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c24fa5d33f083b%3A0xc80b8f06e177fe62!2sNew%20York%2C%20NY%2C%20USA!5e0!3m2!1sen!2seg!4v1680908546849!5m2!1sen!2seg"
          width="600"
          height="450"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
        <h3 class="heading">get in touch <span>+5555555</span></h3>
      </div>
    </section>
    <!-- contact section ends here -->


    <!-- footer section starts here -->

    <section class="footer" id="footer">
      <div class="box-container">
        <div class="box">
          <a href="https://www.instagram.com/"
            ><i class="fa-brands fa-instagram"></i
          ></a>
          <a href="https://www.facebook.com/"
            ><i class="fa-brands fa-facebook-f"></i
          ></a>
          <div class="box">
            <a href="#home"><i class="fas fa-arrow-right"></i>home </a>
            <a href="#vehicles"><i class="fas fa-arrow-right"></i>vehicles </a>
            <a href="#services"><i class="fas fa-arrow-right"></i>services </a>
            <a href="#contact"><i class="fas fa-arrow-right"></i>contact </a>
            <a href="feedback.php"><i class="fas fa-arrow-right"></i>feedback </a>

          </div>
        </div>
      </div>
    </section>

    <!-- footer section ends here -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    <script src="js.js"></script>
    <script src="/js/session.js"></script>
    <script>
        // Logout function
        function logout() {
            try {
                // Call the logout API endpoint
                fetch('/api/auth/logout', {
                    method: 'POST',
                    credentials: 'include'
                }).then(response => {
                    if (response.ok) {
                        // Clear any local storage data
                        localStorage.removeItem('user');
                        // Redirect to login page
                        window.location.href = 'login.html';
                    } else {
                        console.error('Logout failed');
                    }
                }).catch(error => {
                    console.error('Error during logout:', error);
                });
            } catch (error) {
                console.error('Error during logout:', error);
                // Fallback - redirect to login page even if API call fails
                window.location.href = 'login.html';
            }
        }
        
        // Check session when page loads and update UI
        document.addEventListener('DOMContentLoaded', () => {
            checkSession().then(user => {
                if (user && user.roles) {
                    // Show/hide navigation links based on user role
                    const mechanicOnlyElements = document.querySelectorAll('.mechanic-only');
                    const userOnlyElements = document.querySelectorAll('.user-only');
                    
                    if (user.roles.includes('ROLE_MECHANIC')) {
                        mechanicOnlyElements.forEach(el => el.style.display = 'inline-block');
                        userOnlyElements.forEach(el => el.style.display = 'none');
                    } else {
                        mechanicOnlyElements.forEach(el => el.style.display = 'none');
                        userOnlyElements.forEach(el => el.style.display = 'inline-block');
                    }
                }
            });
            
            // Menu button functionality
            document.querySelector('#menu-btn').onclick = () => {
                document.querySelector('#menu-btn').classList.toggle('fa-times');
                document.querySelector('.navbar').classList.toggle('active');
            };
        });
    </script>
  </body>
</html>
